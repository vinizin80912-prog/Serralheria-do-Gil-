<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Serralheria do Gil</title>

<style>
:root{
--bg:#070b08;
--card:#0e1511;
--b:#1f2c25;
--g:#52ff8a;
--r:#ff5a6b;
--mut:#8fa39a;
}

*{box-sizing:border-box;margin:0}
body{
font-family:system-ui;
background:var(--bg);
color:#fff;
overflow-x:hidden
}

/* partículas */
canvas{position:fixed;inset:0;z-index:-1}

/* cards */
.card{
background:var(--card);
border:1px solid var(--b);
border-radius:22px;
padding:16px;
margin:12px;
box-shadow:0 12px 40px #000a
}

.title{
font-size:28px;
font-weight:900;
margin-bottom:6px
}

.small{color:var(--mut);font-size:13px}

/* botões */
.btn{
background:#fff;
color:#000;
border:none;
padding:14px 20px;
border-radius:18px;
font-weight:900;
margin-top:12px
}

.ghost{
background:#0f1914;
color:#fff;
border:1px solid var(--b)
}

/* navegação */
nav{
position:fixed;
bottom:0;
left:0;
right:0;
background:#0b120e;
border-top:1px solid var(--b);
display:flex;
justify-content:space-around;
padding:10px 0
}

nav button{
background:none;
border:none;
color:#9fb3a8;
font-weight:800
}

nav button.active{color:#fff}

/* home */
.home{
display:grid;
place-items:center;
height:80vh;
text-align:center;
padding:20px
}

.big{
font-size:36px;
font-weight:1000
}

/* PIN */
.lock{
position:fixed;
inset:0;
background:#000c;
display:none;
place-items:center;
z-index:10
}

.lock.on{display:grid}

.pin{
background:#0d1511;
padding:20px;
border-radius:22px;
border:1px solid var(--b)
}

.dots{
display:flex;
gap:10px;
justify-content:center;
margin:14px 0
}

.dot{
width:12px;
height:12px;
border-radius:50%;
background:#0b120e;
border:1px solid var(--b)
}

.dot.on{background:#fff}

.pad{
display:grid;
grid-template-columns:repeat(3,1fr);
gap:10px
}

.pad button{
padding:16px;
border-radius:14px;
border:1px solid var(--b);
background:#0f1914;
color:#fff;
font-weight:900
}
</style>
</head>
<body>

<canvas id="bg"></canvas>
<div id="home" class="home">
<div class="card">
<div class="big">Serralheria do Gil</div>
<p class="small">Controle total da serralheria</p>

<button class="btn" onclick="start()">Iniciar</button>
</div>
</div>

<div id="app" style="display:none">

<div id="dash" class="card">
<div class="title">Saldo do mês</div>
<div id="saldo" style="font-size:40px;color:var(--g)">R$ 0</div>

<div class="card">
<div class="title">GN vs SD</div>
<canvas id="graf" height="120"></canvas>
</div>

<div class="card">
<div class="title">Histórico</div>
<div id="hist"></div>
</div>
</div>

<div id="mov" class="card" style="display:none">
<div class="title">Novo lançamento</div>

<input id="desc" placeholder="Descrição">
<input id="valor" type="number" placeholder="Valor">

<select id="tipo">
<option value="gn">Ganho</option>
<option value="sd">Despesa</option>
</select>

<button class="btn" onclick="add()">Salvar</button>
</div>

<div id="clientes" class="card" style="display:none">
<div class="title">Clientes</div>

<input id="nomeCli" placeholder="Nome">
<input id="telCli" placeholder="Telefone">

<button class="btn" onclick="addCli()">Salvar</button>

<div id="listaCli"></div>
</div>
</div>
<nav id="nav" style="display:none">
<button onclick="go('dash')" class="active">Dash</button>
<button onclick="go('mov')">Mov</button>
<button onclick="go('clientes')">Clientes</button>
</nav>

<!-- PIN -->
<div id="lock" class="lock">
<div class="pin">
<h3>PIN</h3>

<div id="dots" class="dots"></div>

<div class="pad">
<button onclick="key(1)">1</button>
<button onclick="key(2)">2</button>
<button onclick="key(3)">3</button>
<button onclick="key(4)">4</button>
<button onclick="key(5)">5</button>
<button onclick="key(6)">6</button>
<button onclick="key(7)">7</button>
<button onclick="key(8)">8</button>
<button onclick="key(9)">9</button>
<button onclick="back()">⌫</button>
<button onclick="key(0)">0</button>
<button onclick="ok()">OK</button>
</div>
</div>
</div>
<script>

/* ====== partículas ====== */
const c = bg.getContext("2d")
bg.width = innerWidth
bg.height = innerHeight

let p = Array.from({length:50},()=>({
x:Math.random()*bg.width,
y:Math.random()*bg.height,
r:Math.random()*2+1,
v:Math.random()*0.5+0.2
}))

function draw(){
c.clearRect(0,0,bg.width,bg.height)
p.forEach(o=>{
o.y-=o.v
if(o.y<0)o.y=bg.height
c.beginPath()
c.arc(o.x,o.y,o.r,0,7)
c.fillStyle="#52ff8a"
c.fill()
})
requestAnimationFrame(draw)
}
draw()

/* ====== dados ====== */
let db = JSON.parse(localStorage.db||`{"mov":[], "cli":[], "pin":""}`)

function save(){
localStorage.db = JSON.stringify(db)
render()
}

/* ====== iniciar ====== */
function start(){
home.style.display="none"
app.style.display="block"
nav.style.display="flex"
render()
lockOn()
}

/* ====== abas ====== */
function go(t){
["dash","mov","clientes"].forEach(x=>document.getElementById(x).style.display="none")
document.getElementById(t).style.display="block"

nav.querySelectorAll("button").forEach(b=>b.classList.remove("active"))
event.target.classList.add("active")
}
 /* ====== lançamentos ====== */
function add(){
db.mov.push({
d:desc.value,
v:+valor.value,
t:tipo.value
})
desc.value=valor.value=""
save()
}

/* ====== clientes ====== */
function addCli(){
db.cli.push({
n:nomeCli.value,
t:telCli.value
})
nomeCli.value=telCli.value=""
save()
}

/* ====== render ====== */
function render(){

// saldo
let gn=0,sd=0
db.mov.forEach(m=>m.t==="gn"?gn+=m.v:sd+=m.v)
saldo.textContent="R$ "+(gn-sd).toFixed(2)

// histórico
hist.innerHTML=db.mov.map(m=>
`<div>${m.d} — R$ ${m.v} (${m.t})</div>`
).join("")

// clientes
listaCli.innerHTML=db.cli.map(c=>
`<div>${c.n} — ${c.t}</div>`
).join("")

drawGraf(gn,sd)
}

/* ====== gráfico animado ====== */
function drawGraf(gn,sd){
const ctx = graf.getContext("2d")
let p=0
function anim(){
p+=0.05
ctx.clearRect(0,0,300,150)
ctx.fillStyle="#52ff8a"
ctx.fillRect(20,120-gn*p,40,gn*p)
ctx.fillStyle="#ff5a6b"
ctx.fillRect(80,120-sd*p,40,sd*p)
if(p<1)requestAnimationFrame(anim)
}
anim()
}

/* ====== PIN ====== */
let buf=""
function lockOn(){lock.classList.add("on")}
function key(n){if(buf.length<4){buf+=n;showDots()}}
function back(){buf=buf.slice(0,-1);showDots()}
function showDots(){
dots.innerHTML=Array(4).fill(0).map((_,i)=>
`<div class="dot ${i<buf.length?"on":""}"></div>`).join("")
}
function ok(){
if(!db.pin){db.pin=buf;save();lock.classList.remove("on");buf="";return}
if(buf===db.pin)lock.classList.remove("on")
buf=""
showDots()
}

</script>
</body>
</html>
