<!doctype html><html lang="pt-br"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Serralheria do Gil</title>
<meta name="theme-color" content="#050806">
<style>
:root{
--bg:#040705;--b:rgba(120,210,160,.10);--txt:#eafff0;--mut:rgba(233,255,241,.58);
--g:#45ff86;--r:#ff4c62;--y:#ffd166;--shadow:0 24px 80px rgba(0,0,0,.72);--blur:18px;--rad:26px;
--ig:linear-gradient(145deg,rgba(255,255,255,.92),rgba(215,255,235,.72));
--pulse:0; /* pulso bem sutil */
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%}
body{
margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
background:
radial-gradient(1200px 800px at 20% 10%,rgba(55,255,140,.06),transparent 58%),
radial-gradient(900px 900px at 90% 30%,rgba(255,80,120,.06),transparent 60%),
radial-gradient(1100px 900px at 50% 90%,rgba(120,180,255,.035),transparent 62%),
var(--bg);
color:var(--txt);overflow:hidden;
}
#bg,#fx{position:fixed;inset:0;z-index:0;pointer-events:none}
#bg{filter:saturate(1.03) contrast(1.08) brightness(.94)}
#fx{z-index:2}
.stage{position:relative;z-index:3;height:100%;display:grid;place-items:center;padding:22px}
.shell{width:min(920px,92vw);perspective:900px}
.card{
position:relative;border-radius:var(--rad);border:1px solid var(--b);
background:linear-gradient(180deg,rgba(12,18,14,.74),rgba(6,9,7,.58));
box-shadow:var(--shadow);backdrop-filter:blur(var(--blur));overflow:hidden;transform-style:preserve-3d;
}
.card:before{
content:"";position:absolute;inset:-2px;opacity:.45;pointer-events:none;
background:
radial-gradient(820px 260px at 18% 22%,rgba(70,255,150,.15),transparent 65%),
radial-gradient(740px 280px at 92% 10%,rgba(255,76,98,.10),transparent 62%),
radial-gradient(700px 320px at 50% 110%,rgba(255,255,255,.05),transparent 58%);
filter:brightness(calc(1 + var(--pulse)*.12));
}
.inner{position:relative;padding:22px 22px 18px}
.top{display:flex;gap:14px;align-items:center}
.logo{
width:54px;height:54px;border-radius:18px;display:grid;place-items:center;
background:linear-gradient(145deg,rgba(12,22,16,.92),rgba(6,9,7,.62));
border:1px solid var(--b);box-shadow:0 20px 60px rgba(0,0,0,.6);
transform:translateZ(30px);
}
.h1{font-weight:950;letter-spacing:.2px;font-size:34px;line-height:1;margin:0;transform:translateZ(28px)}
.sub{color:var(--mut);margin-top:6px;font-size:13px;transform:translateZ(18px)}
.pill{
margin-left:auto;align-self:flex-start;padding:9px 12px;border-radius:999px;
border:1px solid var(--b);background:rgba(6,9,7,.55);color:rgba(233,255,241,.74);
font-weight:850;font-size:12px;transform:translateZ(26px);
}
.hr{height:1px;background:rgba(120,210,160,.10);margin:14px 0}
.center{padding:10px 0 6px;text-align:center;transform:translateZ(18px)}
.center .q{color:rgba(233,255,241,.90);font-size:16px}
.center .p{color:var(--mut);font-size:13px;margin-top:2px}
.row{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
  .btn{position:relative;user-select:none;cursor:pointer;border:0;border-radius:18px;
padding:14px 22px;font-weight:950;letter-spacing:.2px;
transition:transform .18s, filter .18s, box-shadow .18s, background .18s;
transform:translateZ(18px);
}
.btn.primary{
background:var(--ig);color:#06100a;
box-shadow:0 18px 70px rgba(0,0,0,.50), 0 0 0 1px rgba(255,255,255,.16) inset;
}
.btn.ghost{
background:rgba(255,255,255,.045);color:rgba(233,255,241,.90);
border:1px solid rgba(120,210,160,.12);
box-shadow:0 16px 55px rgba(0,0,0,.40), 0 0 0 1px rgba(255,255,255,.05) inset;
}
.btn:before{
content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;opacity:0;
background:
radial-gradient(140px 70px at var(--mx,50%) var(--my,50%),rgba(255,255,255,.34),transparent 64%),
radial-gradient(220px 120px at var(--mx,50%) var(--my,50%),rgba(70,255,150,.12),transparent 72%);
transition:opacity .16s;
}
.btn:after{
content:"";position:absolute;inset:-2px;border-radius:inherit;pointer-events:none;opacity:.0;
background:conic-gradient(from 180deg,rgba(70,255,150,.0),rgba(70,255,150,.20),rgba(255,76,98,.14),rgba(70,255,150,.0));
filter:blur(10px);transition:opacity .18s;
}
.btn:hover:before,.btn.touch:before{opacity:1}
.btn.pop{transform:translateZ(26px) scale(1.04);filter:brightness(1.06)}
.btn.pop:after{opacity:.45}
.btn:active{transform:translateZ(22px) scale(.99)}
.btn.assem{opacity:0;transform:translate3d(var(--sx,0),var(--sy,26px),18px) scale(.94);filter:blur(4px)}
.btn.assem.on{opacity:1;transform:translate3d(0,0,18px) scale(1);filter:blur(0);
transition:transform .55s cubic-bezier(.2,.9,.2,1),opacity .45s,filter .45s}

.small{color:var(--mut);font-size:12px;line-height:1.35;margin-top:10px;text-align:center;transform:translateZ(14px)}
.pinbox{margin:14px auto 6px;width:min(520px,92%);transform:translateZ(16px)}
.pin{
width:100%;max-width:520px;border-radius:18px;border:1px solid rgba(120,210,160,.12);
background:rgba(6,9,7,.55);color:var(--txt);outline:none;padding:14px 16px;
font-size:18px;letter-spacing:10px;text-align:center;
box-shadow:0 22px 90px rgba(0,0,0,.42) inset, 0 0 0 1px rgba(255,255,255,.05) inset;
}
.pin::placeholder{letter-spacing:1px;color:rgba(233,255,241,.30)}
.dots{display:flex;gap:6px;justify-content:center;margin-top:10px;opacity:.85}
.dots i{width:10px;height:10px;border-radius:999px;background:rgba(233,255,241,.12);border:1px solid rgba(120,210,160,.10)}
.dots i.on{background:rgba(70,255,150,.82);box-shadow:0 0 0 7px rgba(70,255,150,.08)}
.actions{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:10px}
.note{display:flex;gap:10px;align-items:center;justify-content:center;color:rgba(233,255,241,.56);font-size:12px;margin-top:8px}
.bad{color:#ffd6dc}.lock{color:#ffd166}
.shake{animation:shake .38s linear}
@keyframes shake{0%,100%{transform:translateZ(16px)}20%{transform:translateZ(16px) translateX(-10px)}40%{transform:translateZ(16px) translateX(9px)}60%{transform:translateZ(16px) translateX(-6px)}80%{transform:translateZ(16px) translateX(4px)}}
.fadeOut{animation:fadeOut .45s ease forwards}
@keyframes fadeOut{to{opacity:0;transform:translateY(14px) scale(.98)}}
.main{position:fixed;inset:0;z-index:5;display:none}
.main.on{display:block}
.main .wrap{position:absolute;inset:0;display:grid;place-items:center;padding:22px}
.main .box{width:min(920px,92vw);border-radius:var(--rad);border:1px solid var(--b);
background:rgba(6,9,7,.65);backdrop-filter:blur(18px);box-shadow:var(--shadow);padding:22px;text-align:center}
.main h2{margin:0;font-size:26px;font-weight:950}
.main p{margin:8px 0 0;color:var(--mut)}
.main .row{margin-top:16px}
</style></head><body>
<canvas id="bg"></canvas><canvas id="fx"></canvas>

<div class="stage"><div class="shell" id="shell"><div class="card" id="card"><div class="inner">
  <div class="top">
    <div class="logo">ðŸ”§</div>
    <div><div class="h1">Serralheria do Gil</div><div class="sub">Controle offline â€¢ PIN â€¢ Tudo salvo no celular</div></div>
    <div class="pill" id="pinStatus">Sem PIN</div>
  </div>
  <div class="hr"></div>
  <div class="center"><div class="q">Gostaria de fazer dinheiro?</div><div class="p">Clique no botÃ£o abaixo.</div></div>

  <div class="row" id="heroBtns">
    <button class="btn primary assem" id="btnStart" style="--sx:-40px;--sy:18px">Iniciar</button>
    <button class="btn ghost assem" id="btnReset" style="--sx:50px;--sy:22px">Reset</button>
    <button class="btn ghost assem" id="btnSound" style="--sx:0px;--sy:40px">Som: OFF</button>
  </div>

  <div class="pinbox" id="pinArea">
    <input class="pin" id="pinInput" inputmode="numeric" maxlength="4" placeholder="PIN (4 dÃ­gitos)">
    <div class="dots" id="dots"><i></i><i></i><i></i><i></i></div>
    <div class="actions">
      <button class="btn ghost assem" id="btnSetPin" style="--sx:-30px;--sy:26px">Criar/Alterar PIN</button>
      <button class="btn ghost assem" id="btnUnlock" style="--sx:30px;--sy:26px">Desbloquear</button>
    </div>
    <div class="note" id="note">Digite seu PIN para entrar.</div>
  </div>

  <div class="small" id="smallTip">Dica: se esquecer o PIN, use <b>Reset</b> (apaga o PIN do aparelho).</div>
</div></div></div></div>

<div class="main" id="main"><div class="wrap"><div class="box">
  <h2>Entrou âœ…</h2><p>Agora vocÃª pluga as prÃ³ximas telas (Dash, Mov, Agenda...).</p>
  <div class="row"><button class="btn primary" id="btnBack">Voltar</button></div>
</div></div></div>
<script>
const $=s=>document.querySelector(s), $$=s=>[...document.querySelectorAll(s)];
const LS=(k,v)=>v===undefined?localStorage.getItem(k):localStorage.setItem(k,v);
const vib=(ms=12)=>navigator.vibrate&&navigator.vibrate(ms);
const now=()=>Date.now();
const clamp=(n,a,b)=>Math.max(a,Math.min(b,n));
const rnd=(a,b)=>a+Math.random()*(b-a);

const KEY_PIN="gil_pin_v1", KEY_LOCK="gil_pin_lock_v1";
let tries=0, lockedUntil=0;

function pinExists(){return !!LS(KEY_PIN);}
function setPinStatus(){ $("#pinStatus").textContent = pinExists() ? "Com PIN" : "Sem PIN"; }
function hash4(s){
  let h=2166136261;
  for(let i=0;i<s.length;i++){h^=s.charCodeAt(i);h=Math.imul(h,16777619)}
  return (h>>>0).toString(16);
}
function setLock(ms){ lockedUntil=now()+ms; LS(KEY_LOCK,String(lockedUntil)); updateNote(); }
function loadLock(){ lockedUntil=+(LS(KEY_LOCK)||0); if(lockedUntil<now()) lockedUntil=0; }
function lockLeft(){ return Math.max(0,lockedUntil-now()); }

function updateDots(){
  const v=$("#pinInput").value.replace(/\D/g,"").slice(0,4);
  $("#pinInput").value=v;
  $$("#dots i").forEach((d,i)=>d.classList.toggle("on",i<v.length));
}
function updateNote(msg,cls){
  const n=$("#note");
  if(msg){ n.textContent=msg; n.className="note "+(cls||""); return; }
  const left=lockLeft();
  if(left>0){ n.textContent=`Bloqueado por ${Math.ceil(left/1000)}s (muitas tentativas).`; n.className="note lock"; }
  else{ n.textContent= pinExists()? "Digite seu PIN para entrar." : "Sem PIN: crie um PIN primeiro."; n.className="note"; }
}
function clearPinInput(){ $("#pinInput").value=""; updateDots(); }

function doSetPin(){
  if(lockLeft()>0) return bump($("#pinArea"),"lock");
  const v=$("#pinInput").value;
  if(v.length!==4) return bump($("#pinArea"),"bad","PIN precisa ter 4 dÃ­gitos.");
  LS(KEY_PIN,hash4(v)); tries=0; clearPinInput();
  setPinStatus(); updateNote("PIN salvo âœ…","");
  sparkAtCenter($("#btnSetPin"));
}
function doUnlock(){
  if(lockLeft()>0) return bump($("#pinArea"),"lock");
  if(!pinExists()) return bump($("#pinArea"),"bad","Crie um PIN primeiro.");
  const v=$("#pinInput").value;
  if(v.length!==4) return bump($("#pinArea"),"bad","Digite o PIN de 4 dÃ­gitos.");
  const ok = hash4(v) === LS(KEY_PIN);
  if(!ok){
    tries++; clearPinInput(); vib(20);
    if(tries>=5){tries=0; setLock(30000); bump($("#pinArea"),"bad","Errou 5x. Bloqueado 30s.");}
    else bump($("#pinArea"),"bad",`PIN incorreto (${tries}/5).`);
    return;
  }
  tries=0; clearPinInput(); enterApp();
}
function doReset(){
  if(!confirm("Reset vai apagar o PIN deste aparelho. Continuar?")) return;
  localStorage.removeItem(KEY_PIN); localStorage.removeItem(KEY_LOCK);
  tries=0; lockedUntil=0; setPinStatus(); updateNote("PIN removido.","");
  sparkAtCenter($("#btnReset")); vib(14);
}
function enterApp(){
  vib(14); sparkAtCenter($("#btnStart"));
  $("#card").classList.add("fadeOut");
  setTimeout(()=>$("#main").classList.add("on"),420);
}
function backHome(){
  $("#main").classList.remove("on");
  $("#card").classList.remove("fadeOut");
  sparkAtCenter($("#btnBack")); vib(10);
}
  function setBtnPointerFx(btn,e){
  const r=btn.getBoundingClientRect();
  const cx=(e.touches?e.touches[0].clientX:e.clientX), cy=(e.touches?e.touches[0].clientY:e.clientY);
  const x=(cx-r.left)/r.width*100, y=(cy-r.top)/r.height*100;
  btn.style.setProperty("--mx",x.toFixed(1)+"%"); btn.style.setProperty("--my",y.toFixed(1)+"%");
}
function popBtn(btn){
  btn.classList.add("pop","touch");
  setTimeout(()=>btn.classList.remove("pop"),190);
  setTimeout(()=>btn.classList.remove("touch"),260);
}
function sparkAtCenter(el){
  const r=el.getBoundingClientRect();
  burst(r.left+r.width/2,r.top+r.height/2,18,"mix"); // menor
}
function bump(el,cls,msg){
  el.classList.remove("shake"); void el.offsetWidth; el.classList.add("shake");
  updateNote(msg,cls||"");
  burst(window.innerWidth/2,window.innerHeight/2-10,16,"neon"); // menor
}
function assemble(){
  ["#btnStart","#btnReset","#btnSound","#btnSetPin","#btnUnlock"]
  .forEach((sel,i)=>setTimeout(()=>$(sel).classList.add("on"),120+i*95));
}

function wireButtons(){
  $$(".btn").forEach(b=>{
    b.addEventListener("mousemove",e=>{setBtnPointerFx(b,e);});
    b.addEventListener("touchmove",e=>setBtnPointerFx(b,e),{passive:true});
    b.addEventListener("mouseenter",()=>{popBtn(b); const r=b.getBoundingClientRect(); burst(r.left+r.width/2,r.top+r.height/2,8,"spark");});
    b.addEventListener("touchstart",e=>{setBtnPointerFx(b,e);popBtn(b); burstTouch(e,false)}, {passive:true});
    b.addEventListener("click",()=>{popBtn(b);clickTick();});
  });
  $("#btnStart").onclick=()=>{ if(pinExists()) doUnlock(); else bump($("#pinArea"),"bad","Crie um PIN primeiro."); };
  $("#btnReset").onclick=doReset;
  $("#btnSetPin").onclick=doSetPin;
  $("#btnUnlock").onclick=doUnlock;
  $("#btnBack").onclick=backHome;
  $("#pinInput").addEventListener("input",updateDots);
  $("#pinInput").addEventListener("keydown",(e)=>{ if(e.key==="Enter") doUnlock(); });
}

function wireParallax(){
  const shell=$("#shell"), card=$("#card");
  let tx=0,ty=0,ax=0,ay=0;
  const apply=()=>{
    ax+=(tx-ax)*.12; ay+=(ty-ay)*.12;
    card.style.transform=`rotateX(${(-ay*9).toFixed(2)}deg) rotateY(${(ax*9).toFixed(2)}deg)`;
    requestAnimationFrame(apply);
  }; apply();
  const set=(x,y)=>{
    const r=shell.getBoundingClientRect();
    tx=clamp((x-(r.left+r.width/2))/r.width,-.6,.6);
    ty=clamp((y-(r.top+r.height/2))/r.height,-.6,.6);
  };
  addEventListener("mousemove",e=>set(e.clientX,e.clientY));
  addEventListener("touchmove",e=>{ if(e.touches[0]) set(e.touches[0].clientX,e.touches[0].clientY); },{passive:true});
}

/* som + pulso BEM fraco */
let audioOn=false, AC=null, master=null, o1=null,o2=null,lfo=null, filt=null;
function audioInit(){
  if(AC) return;
  AC=new (window.AudioContext||window.webkitAudioContext)();
  master=AC.createGain(); master.gain.value=.0; master.connect(AC.destination);
  filt=AC.createBiquadFilter(); filt.type="lowpass"; filt.frequency.value=460; filt.connect(master);
  o1=AC.createOscillator(); o1.type="sine"; o1.frequency.value=110;
  o2=AC.createOscillator(); o2.type="triangle"; o2.frequency.value=220;
  const g1=AC.createGain(); g1.gain.value=.18; const g2=AC.createGain(); g2.gain.value=.10;
  o1.connect(g1); o2.connect(g2); g1.connect(filt); g2.connect(filt);
  lfo=AC.createOscillator(); lfo.type="sine"; lfo.frequency.value=.06;
  const lg=AC.createGain(); lg.gain.value=90; lfo.connect(lg); lg.connect(filt.frequency);
  o1.start(); o2.start(); lfo.start();
}
function setAudio(on){
  audioInit(); audioOn=on;
  $("#btnSound").textContent="Som: "+(audioOn?"ON":"OFF");
  const t=AC.currentTime;
  master.gain.cancelScheduledValues(t);
  master.gain.linearRampToValueAtTime(audioOn?.12:0,t+.25); // bem menor
}
function clickTick(){
  if(!audioOn){vib(8);return;}
  const t=AC.currentTime, osc=AC.createOscillator(), g=AC.createGain();
  osc.type="square"; osc.frequency.value=780;
  g.gain.setValueAtTime(.0001,t);
  g.gain.exponentialRampToValueAtTime(.05,t+.01);
  g.gain.exponentialRampToValueAtTime(.0001,t+.07);
  osc.connect(g); g.connect(master); osc.start(t); osc.stop(t+.08); vib(6);
}
  const bg=$("#bg"), fx=$("#fx");
const bctx=bg.getContext("2d"), fctx=fx.getContext("2d");
let W=0,H=0,stars=[],bursts=[],bills=[];
let pulse=0;

function resize(){
  W=bg.width=fx.width=innerWidth*devicePixelRatio;
  H=bg.height=fx.height=innerHeight*devicePixelRatio;
}
addEventListener("resize",resize,{passive:true}); resize();

function mkStars(n=230){
  stars=[...Array(n)].map(()=>({
    x:Math.random()*W,y:Math.random()*H,
    r:rnd(.9,4.2)*devicePixelRatio,
    vx:rnd(-.16,.16)*devicePixelRatio, vy:rnd(.10,.28)*devicePixelRatio,
    a:rnd(.06,.30),
    g:Math.random()<.88,
  }));
}
mkStars();

function burst(x,y,n=18,mode="mix"){
  x*=devicePixelRatio; y*=devicePixelRatio;
  const neon=(mode==="neon"), spark=(mode==="spark");
  const arr=[...Array(n)].map(()=> {
    const sp = neon? rnd(2.2,4.8) : spark? rnd(1.8,4.2) : rnd(2.0,4.6);
    const ang = rnd(0,Math.PI*2);
    const vx = Math.cos(ang)*sp*devicePixelRatio;
    const vy = Math.sin(ang)*sp*devicePixelRatio - rnd(0,2.0)*devicePixelRatio;
    const life = neon? rnd(26,56) : rnd(22,52);
    const r = neon? rnd(1.1,2.5) : rnd(1.0,2.2);
    let c;
    if(neon) c = Math.random()<.7 ? `rgba(70,255,150,${rnd(.30,.75)})` : `rgba(120,200,255,${rnd(.18,.55)})`;
    else if(spark) c = Math.random()<.8 ? `rgba(255,255,255,${rnd(.16,.45)})` : `rgba(70,255,150,${rnd(.16,.55)})`;
    else c = Math.random()<.7 ? `rgba(70,255,150,${rnd(.18,.65)})` : `rgba(255,255,255,${rnd(.12,.42)})`;
    return {x,y,vx,vy,life,r:r*devicePixelRatio,c,glow:neon?1:0};
  });
  bursts.push(arr);
}
function burstTouch(e,heavy=false){
  const t=e.touches&&e.touches[0]; if(!t) return;
  burst(t.clientX,t.clientY, heavy?22:16, heavy?"neon":"mix");
}

function spawnBill(){
  bills.push({
    x:rnd(W*.10,W*.95), y:-60*devicePixelRatio,
    vy:rnd(1.6,3.2)*devicePixelRatio, vx:rnd(-.26,.26)*devicePixelRatio,
    rot:rnd(0,Math.PI*2), vr:rnd(-.045,.045),
    s:rnd(20,34)*devicePixelRatio, life:rnd(260,520),
    boom:Math.random()<.35
  });
}
setInterval(()=>{ if(Math.random()<.60) spawnBill(); }, 980); // menos frequente

function draw(){
  // pulso: MUITO sutil (remove â€œbatidÃ£oâ€)
  const t = (AC && audioOn) ? AC.currentTime : now()/1000;
  const base = (AC && audioOn) ? 0.18 : 0.12;
  pulse = base + Math.sin(t*(AC && audioOn ? 1.1 : .85)) * (AC && audioOn ? .06 : .04);
  pulse = clamp(pulse,0,1);
  document.documentElement.style.setProperty("--pulse", pulse.toFixed(3));

  bctx.clearRect(0,0,W,H);

  // haze mais escura
  bctx.save();
  bctx.globalAlpha = 0.06 + pulse*0.03;
  bctx.fillStyle = "#45ff86";
  bctx.beginPath(); bctx.arc(W*0.18,H*0.25,(200+pulse*50)*devicePixelRatio,0,Math.PI*2); bctx.fill();
  bctx.globalAlpha = 0.04 + pulse*0.02;
  bctx.fillStyle = "#ff4c62";
  bctx.beginPath(); bctx.arc(W*0.88,H*0.18,(180+pulse*40)*devicePixelRatio,0,Math.PI*2); bctx.fill();
  bctx.restore();

  // stars
  stars.forEach(p=>{
    p.x+=p.vx; p.y+=p.vy;
    if(p.y>H+60) p.y=-60;
    if(p.x>W+60) p.x=-60;
    if(p.x<-60) p.x=W+60;
    const a = p.a + pulse*0.03;
    bctx.fillStyle = p.g ? `rgba(70,255,150,${a})` : `rgba(255,76,98,${a*0.55})`;
    bctx.beginPath(); bctx.arc(p.x,p.y,p.r,0,Math.PI*2); bctx.fill();
  });

  // bills (menos agressivo)
  bills=bills.filter(b=>b.life-->0 && b.y<H+140*devicePixelRatio);
  bills.forEach(b=>{
    b.x+=b.vx; b.y+=b.vy; b.rot+=b.vr;
    if(b.boom && b.life%100===0) burst(b.x/devicePixelRatio,b.y/devicePixelRatio,8,"mix");
    bctx.save();
    bctx.translate(b.x,b.y); bctx.rotate(b.rot);
    bctx.font=`${b.s}px system-ui`; bctx.globalAlpha=.85;
    bctx.fillText("ðŸ’¸",0,0);
    bctx.restore();
  });

  // particles
  fctx.clearRect(0,0,W,H);
  bursts=bursts.filter(g=>g.some(p=>p.life>0));
  bursts.forEach(g=>{
    g.forEach(p=>{
      if(p.life--<=0) return;
      p.x+=p.vx; p.y+=p.vy; p.vy+=.065*devicePixelRatio;
      if(p.glow){
        fctx.save(); fctx.globalAlpha=.40; fctx.fillStyle=p.c;
        fctx.beginPath(); fctx.arc(p.x,p.y,p.r*2.2,0,Math.PI*2); fctx.fill();
        fctx.restore();
      }
      fctx.fillStyle=p.c;
      fctx.beginPath(); fctx.arc(p.x,p.y,p.r,0,Math.PI*2); fctx.fill();
    });
  });

  requestAnimationFrame(draw);
}
draw();

function boot(){
  loadLock(); setPinStatus(); updateDots(); updateNote();
  wireButtons(); wireParallax(); assemble();
  $("#btnSound").onclick=()=>{
    if(!AC) audioInit();
    if(AC.state==="suspended") AC.resume();
    setAudio(!audioOn);
    sparkAtCenter($("#btnSound"));
    burst(innerWidth*0.5, innerHeight*0.28, 18, audioOn?"neon":"mix"); // menor
  };
}
boot();
</script></body></html>
